<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Announcements - HRMS Social Connect</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📢</text></svg>">
</head>
<body>
    <!-- Header Section -->
    <header class="header">
        <div class="container">
            <h1>📢 Company Announcements</h1>
            <p>Stay updated with the latest company news and important notices</p>
            <a href="dashboard.html" class="btn btn-secondary" style="margin-top: var(--spacing-4);">
                ← Back to Dashboard
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <div style="max-width: 800px; margin: 0 auto;">
            <!-- Create Announcement (Admin) -->
            <section class="card" style="margin-bottom: var(--spacing-6);">
                <h2>✍️ Create New Announcement</h2>
                <form id="announcementForm">
                    <div class="form-group">
                        <label for="announcementTitle" class="form-label">Title *</label>
                        <input type="text" id="announcementTitle" class="form-input" placeholder="Enter announcement title" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="announcementCategory" class="form-label">Category</label>
                        <select id="announcementCategory" class="form-input">
                            <option value="general">📋 General</option>
                            <option value="urgent">🚨 Urgent</option>
                            <option value="hr">👥 HR Updates</option>
                            <option value="it">💻 IT Notice</option>
                            <option value="events">🎉 Events</option>
                            <option value="policy">📜 Policy Changes</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="announcementContent" class="form-label">Content *</label>
                        <textarea id="announcementContent" class="form-input" rows="4" placeholder="Enter announcement content" required></textarea>
                    </div>
                    
                    <div style="display: flex; gap: var(--spacing-3);">
                        <button type="submit" class="btn btn-primary">📢 Post Announcement</button>
                        <button type="button" onclick="clearForm()" class="btn btn-secondary">🗑️ Clear</button>
                    </div>
                </form>
            </section>

            <!-- Filter and Search -->
            <section class="card" style="margin-bottom: var(--spacing-6);">
                <div style="display: flex; gap: var(--spacing-4); flex-wrap: wrap; align-items: end;">
                    <div class="form-group" style="flex: 1; min-width: 200px;">
                        <label for="searchAnnouncements" class="form-label">Search Announcements</label>
                        <input type="text" id="searchAnnouncements" class="form-input" placeholder="Search by title or content">
                    </div>
                    <div class="form-group">
                        <label for="filterCategory" class="form-label">Filter by Category</label>
                        <select id="filterCategory" class="form-input">
                            <option value="">All Categories</option>
                            <option value="general">📋 General</option>
                            <option value="urgent">🚨 Urgent</option>
                            <option value="hr">👥 HR Updates</option>
                            <option value="it">💻 IT Notice</option>
                            <option value="events">🎉 Events</option>
                            <option value="policy">📜 Policy Changes</option>
                        </select>
                    </div>
                    <button onclick="filterAnnouncements()" class="btn btn-primary">🔍 Filter</button>
                </div>
            </section>

            <!-- Announcements List -->
            <div id="announcementsList">
                <!-- Announcements will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer style="text-align: center; padding: var(--spacing-8); color: var(--gray-500); border-top: 1px solid var(--gray-200); margin-top: var(--spacing-16);">
        <div class="container">
            <p>&copy; 2024 HRMS Social Connect. Built with modern web technologies.</p>
        </div>
    </footer>

    <script>
        // Sample announcements data
        let announcements = [
            {
                id: 1,
                title: "New Health Insurance Benefits",
                category: "hr",
                content: "We're excited to announce enhanced health insurance benefits starting next month. All employees will receive improved coverage including dental and vision care.",
                author: "HR Department",
                date: "2024-01-18",
                priority: "normal",
                views: 45,
                likes: 12
            },
            {
                id: 2,
                title: "System Maintenance - This Weekend",
                category: "it",
                content: "Our IT systems will undergo scheduled maintenance this Saturday from 2 AM to 6 AM. Email and internal systems may be temporarily unavailable.",
                author: "IT Department",
                date: "2024-01-17",
                priority: "urgent",
                views: 78,
                likes: 5
            },
            {
                id: 3,
                title: "Annual Company Picnic - Save the Date!",
                category: "events",
                content: "Mark your calendars! Our annual company picnic is scheduled for March 15th at Central Park. More details including RSVP information will follow soon.",
                author: "Events Team",
                date: "2024-01-16",
                priority: "normal",
                views: 92,
                likes: 28
            },
            {
                id: 4,
                title: "Updated Remote Work Policy",
                category: "policy",
                content: "We've updated our remote work policy to provide more flexibility. Employees can now work from home up to 3 days per week with manager approval.",
                author: "Management",
                date: "2024-01-15",
                priority: "normal",
                views: 156,
                likes: 34
            },
            {
                id: 5,
                title: "Q4 Performance Reviews Due",
                category: "hr",
                content: "Reminder: Q4 performance reviews are due by January 31st. Please complete your self-assessments and schedule meetings with your managers.",
                author: "HR Department",
                date: "2024-01-14",
                priority: "urgent",
                views: 67,
                likes: 8
            }
        ];

        function getCategoryIcon(category) {
            const icons = {
                general: "📋",
                urgent: "🚨",
                hr: "👥",
                it: "💻",
                events: "🎉",
                policy: "📜"
            };
            return icons[category] || "📋";
        }

        function getCategoryColor(category) {
            const colors = {
                general: "var(--gray-500)",
                urgent: "var(--danger-color)",
                hr: "var(--secondary-color)",
                it: "var(--primary-color)",
                events: "var(--accent-color)",
                policy: "#8b5cf6"
            };
            return colors[category] || "var(--gray-500)";
        }

        function loadAnnouncements(announcementsToShow = announcements) {
            const container = document.getElementById('announcementsList');
            
            if (announcementsToShow.length === 0) {
                container.innerHTML = '<div class="no-results">No announcements found.</div>';
                return;
            }
            
            const announcementCards = announcementsToShow.map(announcement => `
                <div class="card animate-fade-in" style="margin-bottom: var(--spacing-4); border-left: 4px solid ${getCategoryColor(announcement.category)};">
                    <div style="display: flex; justify-content: between; align-items: start; margin-bottom: var(--spacing-3);">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: var(--spacing-2); margin-bottom: var(--spacing-2);">
                                <span style="background: ${getCategoryColor(announcement.category)}; color: white; padding: var(--spacing-1) var(--spacing-2); border-radius: var(--radius-sm); font-size: var(--font-size-xs);">
                                    ${getCategoryIcon(announcement.category)} ${announcement.category.toUpperCase()}
                                </span>
                                ${announcement.priority === 'urgent' ? '<span style="background: var(--danger-color); color: white; padding: var(--spacing-1) var(--spacing-2); border-radius: var(--radius-sm); font-size: var(--font-size-xs);">🚨 URGENT</span>' : ''}
                            </div>
                            <h3 style="margin-bottom: var(--spacing-2); color: var(--gray-800);">${announcement.title}</h3>
                            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: var(--spacing-3);">${announcement.content}</p>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; padding-top: var(--spacing-3); border-top: 1px solid var(--gray-200);">
                        <div style="display: flex; align-items: center; gap: var(--spacing-4); color: var(--gray-500); font-size: var(--font-size-sm);">
                            <span>👤 ${announcement.author}</span>
                            <span>📅 ${new Date(announcement.date).toLocaleDateString()}</span>
                            <span>👁️ ${announcement.views} views</span>
                        </div>
                        <div style="display: flex; gap: var(--spacing-2);">
                            <button class="btn btn-secondary" style="font-size: var(--font-size-sm); padding: var(--spacing-2) var(--spacing-3);" onclick="likeAnnouncement(${announcement.id})">
                                👍 ${announcement.likes}
                            </button>
                            <button class="btn btn-secondary" style="font-size: var(--font-size-sm); padding: var(--spacing-2) var(--spacing-3);" onclick="shareAnnouncement(${announcement.id})">
                                📤 Share
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = announcementCards;
        }

        function filterAnnouncements() {
            const searchTerm = document.getElementById('searchAnnouncements').value.toLowerCase();
            const category = document.getElementById('filterCategory').value;
            
            let filtered = announcements;
            
            if (searchTerm) {
                filtered = filtered.filter(announcement => 
                    announcement.title.toLowerCase().includes(searchTerm) ||
                    announcement.content.toLowerCase().includes(searchTerm)
                );
            }
            
            if (category) {
                filtered = filtered.filter(announcement => announcement.category === category);
            }
            
            // Sort by date (newest first) and priority (urgent first)
            filtered.sort((a, b) => {
                if (a.priority === 'urgent' && b.priority !== 'urgent') return -1;
                if (b.priority === 'urgent' && a.priority !== 'urgent') return 1;
                return new Date(b.date) - new Date(a.date);
            });
            
            loadAnnouncements(filtered);
        }

        function likeAnnouncement(id) {
            const announcement = announcements.find(a => a.id === id);
            if (announcement) {
                announcement.likes++;
                loadAnnouncements();
            }
        }

        function shareAnnouncement(id) {
            const announcement = announcements.find(a => a.id === id);
            if (announcement) {
                alert(`Sharing: "${announcement.title}"`);
                // This would integrate with sharing functionality
            }
        }

        function clearForm() {
            document.getElementById('announcementForm').reset();
        }

        // Handle form submission
        document.getElementById('announcementForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('announcementTitle').value;
            const category = document.getElementById('announcementCategory').value;
            const content = document.getElementById('announcementContent').value;
            
            const newAnnouncement = {
                id: announcements.length + 1,
                title: title,
                category: category,
                content: content,
                author: "Current User",
                date: new Date().toISOString().split('T')[0],
                priority: category === 'urgent' ? 'urgent' : 'normal',
                views: 0,
                likes: 0
            };
            
            announcements.unshift(newAnnouncement);
            
            // Show success message
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-success';
            alertDiv.textContent = 'Announcement posted successfully!';
            this.parentNode.insertBefore(alertDiv, this);
            
            setTimeout(() => alertDiv.remove(), 3000);
            
            this.reset();
            loadAnnouncements();
        });

        // Load announcements on page load
        window.addEventListener('load', () => {
            loadAnnouncements();
        });

        // Add search functionality
        document.getElementById('searchAnnouncements').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                filterAnnouncements();
            }
        });
    </script>
</body>
</html>
